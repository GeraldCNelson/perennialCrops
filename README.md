# Perennial Crops - R and c++ code and data

This dryad site contains all the R and c++ code and data to generate the results in the Global Change Biology, "Assessing temperature-based adaptation limits to climate change of temperate perennial fruit crops". 

# Directory Structure
- data-raw - The raw input data are included in this directory. It has the following sub directories
  * climdata - climate data files. Land only files from the ISIMIP project. These data also can be downloaded from 
[https://doi.org/10.48364/ISIMIP.842396.1](https://doi.org/10.48364/ISIMIP.842396.1)
Follow the directions to download for tasmin, tas, and tasmax for each of the five GCMs (GFDL-ESM4, UKESM1-0-LL, MPI-ESM1-2-HR, MRI-ESM2-0, and IPSL-CM6A-LR).
  * crops - information on crop area from earthstat.org, chill portions requirements
  * perennials - an excel version of the data table in the supplementary materials of the pape
  * regionInformation - files used to construct the boarders used in the graphics
- data - processed data that are used to generate the final results. Generated by chillingCalcs.R and chillPortions.R
  * crops - raster mask files for each crop in the earthstat data.
-- growingDegreeDays - daily growing degree days by ESM and ensemble means across the models, locations where growing degree days are not limiting for one of the crops.
  * perennials - various files related to crop specific suitability
  * runs - files with the results of calculations on the number of days with a value below or above a limit, a run.
- graphics - destination for graphics results

# Order of operations

Run (or source) the R files in the following order

- chillingCalcs.R - output the chilling portions file stored in data-raw. This will take a long time and the output files are already available. Run only if new versions are needed.
- perennialCalcs.R  - directions for running are included in the file

The graphics for the paper are generated by the following files

- GCBPerennials_Figure_1.R
- GCBPerennials_Figure_2.R
- GCBPerennials_Table_4.R
- GCBPerennials_Table_5.R
- GCBPerennials_Table_7.R

Tables 1, 2, 6, and 6 are just word tables that are not generated in R.

